<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0 ,viewport-fit=cover" />
  <title>SUBJECTS</title>
  <link rel="icon" type="image/png" href="/images/icon.png">
  <!-- <link rel="stylesheet" type="text/css" href="stylesheets/style.css"> -->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" />
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" />
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* body {
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background: #01687b;
            transition: 0.5s;
        } */

    h1 {
      color: #fff;
      font-size: 50px;
    }

    .content {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 50px;
      /* overflow-x:scroll ; */
      width: 100%;
      height: 100%;
      gap: 10px;
      row-gap: 25px;
      /* column-gap: 20px; */
      break-inside: avoid;
      padding: 10px;
    }

    /* .card {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            width: auto;
            height: auto;
            padding: 15px;
            background: #c1d1e1;
            border-radius: 20px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1),
                5px 10px 15px rgba(0, 0, 0, 0.1),
                10px 15px 205px rgba(0, 0, 0, 0.1),
                15px 20px 25px rgba(0, 0, 0, 0.1),
                20px 25px 30px rgba(0, 0, 0, 0.1),
                25px 30px 25px rgba(0, 0, 0, 0.1),
                inset 2px 2px rgba(255, 255, 255, 0.2),
                inset -2px -2px rgba(0, 0, 0, 0.2);

            transition: 0.5s;
            overflow: hidden;

        } */

    /* .card a {
            font-size: 15px;
            font-weight: bold;
        }

        .card:hover {
            transform: scale(1.07);
        }

        .hov {
            display: block;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .hov a {
            padding: 5px;
            text-decoration: none;
            color: #333;
            border-radius: 5px;
            transition: 0.5s;
        } */
    .card {
      width: auto;
      height: 70px;
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 10px;
      border-radius: 10px;
      /* overflow: hidden; */
    }

    .card .subject {
      position: relative;
      transform: translateY(10px);
      border-radius: 10px;
      padding: 10px 5px;
      background: #dad7db;
      transition: 0.5s;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1),
        5px 10px 15px rgba(0, 0, 0, 0.1), 10px 15px 205px rgba(0, 0, 0, 0.1),
        15px 20px 25px rgba(0, 0, 0, 0.1), 20px 25px 30px rgba(0, 0, 0, 0.1),
        inset 2px 2px rgba(255, 255, 255, 0.2),
        inset -2px -2px rgba(0, 0, 0, 0.2);
    }

    .card .paper {
      width: 100%;
      height: auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      /* background: #85e9ee; */
    }

    .card .paper a {
      position: relative;
      transform: translateY(20px);
      opacity: 0;
      transition: 0.3s;
      padding: 6px;
      text-decoration: none;
      color: #000000;
      background: #d2ced3;
      border-radius: 5px;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1),
        5px 10px 15px rgba(0, 0, 0, 0.1), 10px 15px 205px rgba(0, 0, 0, 0.1),
        15px 20px 25px rgba(0, 0, 0, 0.1), 20px 25px 30px rgba(0, 0, 0, 0.1),
        inset 2px 2px rgba(255, 255, 255, 0.2),
        inset -2px -2px rgba(0, 0, 0, 0.2);
      font-size: 14px;
    }

    .card:hover .subject {
      transform: translateY(-25px);
    }

    .card:hover a {
      transform: translateY(-5px);
      opacity: 1;
    }

    .hov a:hover {
      background: #30404fbb;
      color: #e2ebeb;
      transform: scale(1.1);
    }

    input {
      border: none;
      padding: 10px;
      outline: none;
      border-radius: 5px;
      font-weight: bold;
      color: #373636;
    }

    .sub {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 15px;
    }

    form {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 10px;
    }

    .tooltip {
      position: absolute;
      display: none;
      justify-content: center;
      align-items: center;
      left: 58%;
      width: auto;
      height: auto;
      /* visibility: hidden; */
      /* overflow: hidden; */
    }

    .tooltip span {
      width: 70px;
      height: auto;
      background: #c1d1e1d2;
      padding: 5px;
      border-radius: 5px;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1),
        5px 10px 15px rgba(0, 0, 0, 0.1), 10px 15px 205px rgba(0, 0, 0, 0.1),
        15px 20px 25px rgba(0, 0, 0, 0.1), 20px 25px 30px rgba(0, 0, 0, 0.1),
        30px 35px 40px rgba(0, 0, 0, 0.1), 40px 45px 50px rgba(0, 0, 0, 0.1),
        50px 55px 60px rgba(0, 0, 0, 0.1),
        inset 2px 2px rgba(255, 255, 255, 0.2),
        inset -2px -2px rgba(0, 0, 0, 0.2);
      font-size: 10px;
      font-weight: 900;
      animation: tiptop infinite;
      transition: 0.5s;
      animation-delay: 1s;
      animation-duration: 4s;
      color: #1e262d;
    }

    .tooltip span::before {
      position: absolute;
      content: " ";
      width: 5px;
      height: 5px;
      left: -5px;
      transform: rotate(45deg);
      /* background: #0c0d0d;
             */
      border-bottom: 5px solid #c1d1e1d2;
      border-left: 5px solid #c1d1e1d2;
    }

    /* ui for suggestion*/

    .ui-autocomplete {
      position: absolute;
      background-color: #fff;
      border: 1px solid #ccc;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      width: auto;
      z-index: 1000;
      list-style: none;
      padding: 0;
      margin: 0;
      border-radius: 10px;
    }

    /* Styling for each suggestion item */
    .ui-autocomplete li {
      padding: 5px;
      font-size: 13px;
      font-weight: bolder;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .advanced-autocomplete {
      background-color: #f2f2f2;
      border: 1px solid #ccc;
      padding: 8px;
    }

    .ui-autocomplete li:last-child {
      border-bottom: none;
    }

    /* Styling for the selected suggestion item */
    .ui-autocomplete li.ui-state-active {
      background-color: #f5f5f5;
    }

    .ui-state-active,
    .ui-widget-content .ui-state-active,
    .ui-widget-header .ui-state-active {
      background-color: #1d656c;
      border-radius: 5px;
      outline: none;
      border: none;
      color: #fff;
      transition: 0.2s;
    }

    /* Styling for the input field */
    .ui-autocomplete-input {
      padding: 10px;
      border: none;
      outline: none;
      font-size: 14px;
    }

    .ui-autocomplete-wrapper {
      position: relative;
      display: inline-block;
      /* width: 300px; */
      /* Adjust width as needed */
    }

    .modern-autocomplete {
      background-color: #ffffff;
      border: 1px solid #cccccc;
      border-radius: 4px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      list-style-type: none;
      padding: 0;
      max-height: 200px;
      overflow-y: auto;
      animation: fadeIn 0.3s ease;
    }

    .modern-autocomplete li {
      padding: 8px 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .modern-autocomplete li:hover {
      background-color: #f1f1f1;
    }

    .back:hover {
      transform: scale(1.2);
    }
    .backs
    {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    .back {
      padding: 5px 10px;
      background: #f2f7fb;
      border-radius: 5px;
      text-decoration: none;
      color: rgb(43, 60, 85);
      transition: 0.5s;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes tiptop {
      0% {
        transform: translateY(0px);
      }

      25% {
        transform: translateY(-5px);
      }

      50% {
        transform: translateY(5px);
      }

      75% {
        transform: translateY(-5px);
      }

      100% {
        transform: translateY(0px);
      }
    }
  </style>
</head>

<body>
  <%- include('partials/header') %>

    <div class="sub">
      <% if (data) { %>
        <h1 class="sub">
          <%=dep%>
        </h1>
        <%} else if(item) {%>
          <h1 class="sub">Search</h1>
          <%} else {%>
            <h1 class="sub">
              <%=notfind%>
            </h1>
            <%}%>
    </div>
    <br />
    <form action="/<%=link%>" method="get" autocomplete="off" id="form-data">
      <% if (data) { %>
        <input type="text" id="searchInput" placeholder="Enter subject" name="searchinput" required />
        <div class="tooltip" id="tooltip">
          <span>Hey! Search here by Subject Name</span>
        </div>

        <%} else {%>
          <%}%>
    </form>
    <div class="content">
      <% if (data) { %>
        <%data.forEach(function(item,i=0){%>
          <!-- <div class="card">
                        <p style="text-decoration: none;padding: 10px;font-weight:bolder ;color:#135157 ;">
                            <%=item.Subjects%>
                        </p>
                        <br>
                        <div class="hov">
                            <a href="/dept/<%=dep%>/<%=item.Subjects%>/mst1">Mst1</a>
                            <a href="/dept/<%=dep%>/<%=item.Subjects%>/mst2">Mst2</a>
                            <a href="/dept/<%=dep%>/<%=item.Subjects%>/final">Final</a>
                        </div>

                    </div> -->
          <div class="card">
            <div class="subject">
              <span>
                <%=item.Subjects%>
              </span>
            </div>
            <div class="paper">
              <a href="/dept/<%=dep%>/<%=item.Subjects%>/mst1">Mst1</a>
              <a href="/dept/<%=dep%>/<%=item.Subjects%>/mst2">Mst2</a>
              <a href="/dept/<%=dep%>/<%=item.Subjects%>/final">Final</a>
            </div>
          </div>

          <% })%>
            <% } else if(item) { %>
              <div class="card">
                <div class="subject">
                  <span>
                    <%=item.Subjects%>
                  </span>
                </div>
                <div class="paper">
                  <a href="/dept/<%=dep%>/<%=item.Subjects%>/mst1">Mst1</a>
                  <a href="/dept/<%=dep%>/<%=item.Subjects%>/mst2">Mst2</a>
                  <a href="/dept/<%=dep%>/<%=item.Subjects%>/final">Final</a>
                </div>
              </div>
              <% } %>
    </div>
    <br /><br />
    <div class="backs">
      <a href="/dept" class="back">click to go back</a>
    </div>
    <br /><br />

    <script>
      var ejsVariable = "<%= search %>";
      // var ejsVariable = "searchmech";
      // console.log("<%= search %>");
      fetch(`http://localhost:3000/${ejsVariable}`)
        .then((response) => {
          if (response.ok) {
            return response.json();
          } else {
            throw new Error("Error: " + response.status);
          }
        })
        .then((data) => {
          arr = [];
          const stringed = data;
          data.forEach((element) => {
            arr.push(element.Subjects);
          });
          done = () => {
            $("#searchInput").autocomplete({
              source: arr,
              delay: 200, // Delay in milliseconds before making the request to the source
              position: {
                my: "left top", // Position of the dropdown relative to the input field
                at: "left bottom",
              },
              open: function (event, ui) {
                $("#searchinput").addClass("modern-autocomplete");
              },
            });
          };
          done();
        })
        .catch((error) => {
          console.error("Error:", error);
        });

      const inputElement = document.getElementById("searchInput");

      // Set the focus on the input element when the page loads
      window.onload = function () {
        inputElement.focus();
      };
      $(window).on("load", () => {
        setTimeout(() => {
          //to fade input
          // document.getElementById("searchInput").style.opacity = 0.5;

          $("#tooltip").fadeIn(2000);
          document.getElementById("tooltip").style.display = "flex";

          tooltip();
        }, 500);
      });
      tooltip = () => {
        $(".tooltip").delay(3000).fadeOut("slow");

        //to fade input

        // setTimeout(() => {
        //         document.getElementById("searchInput").style.opacity = 1;
        //     }, 3000);
      };
    </script>
</body>

</html>